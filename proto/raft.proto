syntax = "proto3";

package raft_kv;

service RaftService {

    // ===== Consensus =====>

    // Leader -> replicate log entries, also used as heartbeat
    rpc AppendEntries (AppendEntriesRequest) returns (AppendEntriesResponse);

    // Candidates -> gather votes
    rpc RequestVote (RequestVoteRequest) returns (RequestVoteResponse);

    // <===== Consensus =====

    // ===== Client RPC =====>

    // Client -> Set value
    rpc Put (PutRequest) returns (PutResponse);

    // Client -> Get value
    rpc Get (GetRequest) return (GetResponse);
    
    // <===== Client RPC =====
}

// ============== Messages ==============>

// ===== Consensus Messages =====>
// format for entries in the log maintained
message LogEntry {
    int32 term = 1;
    string key = 2;
    string value = 3;
}

message AppEntriesRequest {

}

message AppEntriesResponse {

}

message RequestVoteRequest {

}

message RequestVoteResponse {

}

// <===== Consensus Messages =====

// ===== Client Messages =====>

message PutRequest {

}

message PutResponse {

}

message GetRequest {

}

message GetResponse {

}

// <===== Client Messages =====

// <============== Messages ==============